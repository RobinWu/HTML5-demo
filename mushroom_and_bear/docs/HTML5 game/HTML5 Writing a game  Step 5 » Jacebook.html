<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0066)http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/ -->
<html dir="ltr" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>HTML5 Writing a game: Step 5 » Jacebook</title>
<link rel="shortcut icon" type="image/ico" href="http://jacebook.co.uk/wp-content/themes/redbel/favicon.ico">
<link href="./HTML5 Writing a game  Step 5 » Jacebook_files/style.css" rel="stylesheet" type="text/css" media="all">
<link rel="pingback" href="http://jacebook.co.uk/xmlrpc.php">
<script type="text/javascript" src="./HTML5 Writing a game  Step 5 » Jacebook_files/jquery.min.js"></script>
<!--[if lte IE 8]> 
<style type="text/css">/* Styles globaux */
#comments li, #comments input.text, #comments textarea, #comments .input-text {behavior:url(http://jacebook.co.uk/wp-content/themes/redbel/js/border-radius.htc);}
{behavior:url(http://jacebook.co.uk/wp-content/themes/redbel/js/border-radius.htc);}
</style>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="Jacebook » Feed" href="http://jacebook.co.uk/feed/">
<link rel="alternate" type="application/rss+xml" title="Jacebook » Comments Feed" href="http://jacebook.co.uk/comments/feed/">
<script type="text/javascript" src="./HTML5 Writing a game  Step 5 » Jacebook_files/l10n.js"></script>
<script type="text/javascript" src="./HTML5 Writing a game  Step 5 » Jacebook_files/comment-reply.js"></script>
<link rel="prev" title="HTML5 Writing a game: Step 4" href="http://jacebook.co.uk/blog/2010/09/15/html5-writing-a-game-step-4/">
<link rel="next" title="HTML5 Writing a game: Step 6 (Final)" href="http://jacebook.co.uk/blog/2010/11/05/html5-writing-a-game-step-6-final/">
<link rel="canonical" href="./HTML5 Writing a game  Step 5 » Jacebook_files/HTML5 Writing a game  Step 5 » Jacebook.html">
<link rel="shortlink" href="http://jacebook.co.uk/?p=228">
<link rel="stylesheet" type="text/css" href="./HTML5 Writing a game  Step 5 » Jacebook_files/social_widget.css">
<style type="text/css">
#header{
    background: url(http://jacebook.co.uk/wp-content/themes/redbel/empty-header.png) no-repeat;
    height: 153px;
    width:1000px;
}
#header h1.blog-title a, #site-description {
    color:#fff;
}
</style>
<link rel="stylesheet" type="text/css" href="./HTML5 Writing a game  Step 5 » Jacebook_files/shCore.css"><link rel="stylesheet" type="text/css" href="./HTML5 Writing a game  Step 5 » Jacebook_files/shThemeDefault.css"><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3">


</head>
<body class="single single-post postid-228 single-format-standard">
<div class="website-container">
	<div id="header">
		<form action="http://jacebook.co.uk/">
			<div class="search-form">
				<label class="search-label-sliding" for="search-sliding" style="left: 15px; opacity: 0.4; ">Search</label>
				<input name="s" id="search-sliding" class="search-sliding" type="text" value="">
				<input type="image" name="Search" src="./HTML5 Writing a game  Step 5 » Jacebook_files/transparent.gif" alt="Search" class="search-button">
			</div>
		</form>
		<h1 class="blog-title"><a href="http://jacebook.co.uk/">Jacebook</a></h1>
		<div id="site-description">The ramblings of Jason Croucher</div>
		<a href="http://jacebook.co.uk/feed/"><img src="./HTML5 Writing a game  Step 5 » Jacebook_files/transparent.gif" height="33" width="55" alt="RSS Feed" id="rss-button"></a>
	<div class="menu"><ul><li style="background-position: 0px 38px; "><a href="http://jacebook.co.uk/" title="Home">Home</a></li><li class="page_item page-item-12 current_page_parent"><a href="http://jacebook.co.uk/news/" title="News">News</a></li><li class="page_item page-item-2" style="background-position: 0px 38px; "><a href="http://jacebook.co.uk/about/" title="About">About</a></li></ul></div>
	</div>	<div id="content">
				<div id="nav-above" class="navigation">
					<div class="nav-previous"><a href="http://jacebook.co.uk/blog/2010/09/15/html5-writing-a-game-step-4/" rel="prev"><span class="meta-nav">←</span> HTML5 Writing a game: Step 4</a></div>
					<div class="nav-next"><a href="http://jacebook.co.uk/blog/2010/11/05/html5-writing-a-game-step-6-final/" rel="next">HTML5 Writing a game: Step 6 (Final) <span class="meta-nav">→</span></a></div>
				</div><!-- #nav-above -->

		<div id="post-228" class="post-228 post type-post status-publish format-standard hentry category-html5 category-java-script category-jquery tag-bouncing-animals tag-game tag-html5 tag-iphone article">
			<div class="article-corps-title">
				<div class="article-top"><a href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#header" class="top-link" style="background-position: 100% 0%; ">TOP</a></div>
				<h2 class="article-title"><a href="./HTML5 Writing a game  Step 5 » Jacebook_files/HTML5 Writing a game  Step 5 » Jacebook.html" title="Permalink to HTML5 Writing a game: Step 5" rel="bookmark">HTML5 Writing a game: Step 5</a></h2>
				<div class="article-date"><span class="month">Sep</span> <span class="day">20</span></div>
				<div class="article-meta-autor">Posted by Jason Croucher in <a href="http://jacebook.co.uk/blog/category/html5/" title="View all posts in html5" rel="category tag">html5</a>, <a href="http://jacebook.co.uk/blog/category/java-script/" title="View all posts in Java Script" rel="category tag">Java Script</a>, <a href="http://jacebook.co.uk/blog/category/java-script/jquery/" title="View all posts in jQuery" rel="category tag">jQuery</a></div>
			</div>
			<div class="article-corps">
				<div class="article-page-contents">
				<h3>It’s all in the timing and that browser sounds different!</h3>
<p>Click <a href="http://jacebook.co.uk/share/html5">html5 rewrite of bouncing animals</a> to try out the latest version.</p>
<p>As always, thanks for reading the updates on the HTML5 rewrite of bouncing animals. However, I need to start this post with an apology. I promised last time that I’d focus on keeping score and some baddies, but I got bogged down in a performance issue between browsers and I wanted to share my thoughts on that before continuing. In terms of game play, this post doesn’t add a lot of extra features, but in terms of consistent performance across browsers we’ve made significant improvements.</p>
<p>Initially I was using setInterval to create a game loop as shown below. </p>
<div><div id="highlighter_958558" class="syntaxhighlighter  plain"><div class="toolbar"><span><a href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">//Start/stop the game loop (and more importantly that annoying boinging!)</code></div><div class="line number2 index1 alt1"><code class="plain plain">function toggleGameplay() {</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">gameRunning = !gameRunning;</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">if(gameRunning)&nbsp;&nbsp;&nbsp;&nbsp; {</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">clearInterval(gameloopId);</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">gameloopId = setInterval(gameLoop, 10);</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">}</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">else</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">{</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">clearInterval(gameloopId);</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">}</code></div><div class="line number12 index11 alt1"><code class="plain plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>In order to check the number of times the loop was actually being called, I decided to create a monitor for what was essentially my fps (frames per second) rate. By creating an interval of 1000msecs I would monitor the number of times the game loop had actually been called during that time period. </p>
<div><div id="highlighter_194877" class="syntaxhighlighter  plain"><div class="toolbar"><span><a href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">function startFPSCounter()</code></div><div class="line number2 index1 alt1"><code class="plain plain">{</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">setInterval(fps, 1000);</code></div><div class="line number4 index3 alt1"><code class="plain plain">}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="plain plain">//Update the display to show frames per second and reset ready for next count</code></div><div class="line number7 index6 alt2"><code class="plain plain">function fps()</code></div><div class="line number8 index7 alt1"><code class="plain plain">{</code></div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">$("#fps").html(frameCount + " fps");</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">frameCount=0;</code></div><div class="line number11 index10 alt2"><code class="plain plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>During the gameLoop I would increment the value of the variable frameCount, thus giving me a total number of times the loop was called every second.</p>
<p>The setInterval time period for the game loop was 10msecs. Meaning I was hoping for near on 100 loops per second which on hindsight may have been a little ambitious depending on the browser and operating environment.</p>
<p>This is not a scientific test to compare browser speeds, but rather trying to establish what would be the best approach in terms of javascript timers when using HTML5 canvas to create an animation. However, the results of my first test where:</p>
<p>Using setInterval: 10msecs</p>
<p>Safari: 	average between 88-89 fps<br>
Chrome:	average between 99-100 fps<br>
Firefox:	average between 77-78 fps</p>
<p>So, with the exception of Chrome, it would seem that the browsers were getting saturated in terms of the their ability to actually call the loop and process the contents every 10msecs.</p>
<p>Then I realised, what if the browsers execution engines weren’t actually that accurate in terms the timers? </p>
<p>If that was the case, not only was the timer to execute the game loop inaccurate, but the timer checking how many times it was called would also give a false reading!</p>
<p>It was then that I discovered this article: <a href="http://blogs.sitepoint.com/2010/06/23/creating-accurate-timers-in-javascript/">http://blogs.sitepoint.com/2010/06/23/creating-accurate-timers-in-javascript/</a> </p>
<p>For those that are interested in creating accurate timers in java script, I would recommend reading it. Although I note that one reply does call into question the idea, citing that many browsers force a minimum delay (usually 15msecs) and that the accuracy of this method of compensation isn’t that accurate. However, in the absence of any other method I decide to use this “auto compensating” method to attempt to create a consistent timing across browsers.</p>
<div><div id="highlighter_689583" class="syntaxhighlighter  plain"><div class="toolbar"><span><a href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">//Start game timer, i.e. setTimeout that calls itself taking into account the</code></div><div class="line number2 index1 alt1"><code class="plain plain">//actual real difference in time. </code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="plain plain">function startGameTimer()</code></div><div class="line number5 index4 alt2"><code class="plain plain">{</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">var start = new Date().getTime(),</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">time = 0;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">function timer()</code></div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">{</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">time += 15;</code></div><div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">var diff = (new Date().getTime() - start) - time;</code></div><div class="line number14 index13 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">if(gameRunning)</code></div><div class="line number15 index14 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">{</code></div><div class="line number16 index15 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">gameLoop();</code></div><div class="line number17 index16 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">window.setTimeout(timer, (15 - diff));</code></div><div class="line number18 index17 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">}</code></div><div class="line number19 index18 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">}</code></div><div class="line number20 index19 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">window.setTimeout(timer, 15);</code></div><div class="line number21 index20 alt2"><code class="plain plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Following a number of tests across safari, chrome and firefox, it appeared that 15msecs was on average the best delay for consistency across browsers. The code above checks the time every time it calls setTimeout and attempts to compensate for any variation in accuracy by deducting the difference.</p>
<p>Also, the fps counter followed a similar mechanism attempting to ensure a consistent timing. This resulted in all browsers reporting a similar fps on the iMac.</p>
<div><div id="highlighter_15331" class="syntaxhighlighter  plain"><div class="toolbar"><span><a href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">function startFPSCounter()</code></div><div class="line number2 index1 alt1"><code class="plain plain">{</code></div><div class="line number3 index2 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">var start = new Date().getTime(),</code></div><div class="line number4 index3 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">time = 0;</code></div><div class="line number5 index4 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">function instance()</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">{</code></div><div class="line number7 index6 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">time += 1000;</code></div><div class="line number8 index7 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">fps();</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">var diff = (new Date().getTime() - start) - time;</code></div><div class="line number11 index10 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">window.setTimeout(instance, (1000 - diff));</code></div><div class="line number12 index11 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">}</code></div><div class="line number13 index12 alt2"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">window.setTimeout(instance, 1000);</code></div><div class="line number14 index13 alt1"><code class="plain plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>setTimeout with auto compensating based on reported time from Date</p>
<p>Safari:	average between 66 – 67 fps<br>
Chrome:	average between 66 – 67 fps<br>
Firefox:	average between 66 – 67 fps</p>
<p>With this generally slower, but consistent fps I increased the animals speed to +3 for a similar game play across all browsers.</p>
<p>In case you’re wondering the iPhone 3GS was not able to create a frame rate better than 9-10fps.</p>
<h4>Audio for all</h4>
<p>As mentioned in a previous post, Chrome supports only mp3 where as the others have included support for wav. So to ensure that the game plays sounds in all browsers I have now modified the loading of sounds to take into account he browser type and load the appropriate sound file.</p>
<div><div id="highlighter_747583" class="syntaxhighlighter  plain"><div class="toolbar"><span><a href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">01</div><div class="line number2 index1 alt1">02</div><div class="line number3 index2 alt2">03</div><div class="line number4 index3 alt1">04</div><div class="line number5 index4 alt2">05</div><div class="line number6 index5 alt1">06</div><div class="line number7 index6 alt2">07</div><div class="line number8 index7 alt1">08</div><div class="line number9 index8 alt2">09</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">var soundType = "wav";</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="plain plain">//change sound type based on browser (i.e. chrome)</code></div><div class="line number4 index3 alt1"><code class="plain plain">if(navigator.userAgent.toLowerCase().indexOf('chrome') &gt; -1)</code></div><div class="line number5 index4 alt2"><code class="plain plain">{</code></div><div class="line number6 index5 alt1"><code class="plain spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain plain">soundType = "mp3";</code></div><div class="line number7 index6 alt2"><code class="plain plain">}</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="plain plain">//Create and load sounds</code></div><div class="line number10 index9 alt1"><code class="plain plain">var boing1 = new Audio("./sounds/boing_1." + soundType);</code></div><div class="line number11 index10 alt2"><code class="plain plain">var boing2 = new Audio("./sounds/boing_2." + soundType);</code></div><div class="line number12 index11 alt1"><code class="plain plain">var boing3 = new Audio("./sounds/boing_3." + soundType);</code></div><div class="line number13 index12 alt2"><code class="plain plain">var boing4 = new Audio("./sounds/boing_4." + soundType);</code></div><div class="line number14 index13 alt1"><code class="plain plain">var boing5 = new Audio("./sounds/boing_5." + soundType);</code></div><div class="line number15 index14 alt2"><code class="plain plain">var awwwww = new Audio("./sounds/crowdgroan." + soundType);</code></div><div class="line number16 index15 alt1"><code class="plain plain">var collisionPrize = new Audio("./sounds/collisionPrize." + soundType);</code></div><div class="line number17 index16 alt2"><code class="plain plain">var collisionStarPrize = new Audio("./sounds/collisionStarPrize." + soundType);</code></div></div></td></tr></tbody></table></div></div>
<p>That concludes the changes done so far, next time I really will add some baddies and keep a score…. promise.</p>
<p>Click <a href="http://jacebook.co.uk/share/html5">html5 rewrite of bouncing animals</a> to try out the latest version.</p>
				</div>
												<div class="article-meta-keywords">Tags: <a href="http://jacebook.co.uk/blog/tag/bouncing-animals/" rel="tag">bouncing animals</a>, <a href="http://jacebook.co.uk/blog/tag/game/" rel="tag">game</a>, <a href="http://jacebook.co.uk/blog/tag/html5/" rel="tag">html5</a>, <a href="http://jacebook.co.uk/blog/tag/iphone/" rel="tag">iPhone</a></div>
			</div>
			<div class="article-footer"></div>
		</div>
		
			<div id="comments">




								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://jacebook.co.uk/blog/2010/09/20/html5-writing-a-game-step-5/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://jacebook.co.uk/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email is <em>never</em> published nor shared.</p>							<div class="comment-form-author"><input id="author" name="author" type="text" value="" size="30" class="text"><label for="author">Name <span class="required">(Required)</span></label> </div><!-- #form-section-author .form-section -->
<div class="comment-form-email"><input id="email" name="email" type="text" value="" size="30" class="text"><label for="email">Email <span class="required">(Required)</span></label> </div><!-- #form-section-email .form-section -->
<div class="comment-form-url"><input id="url" name="url" type="text" value="" size="30" class="text"><label for="url">Website</label></div><!-- #form-section-url .form-section -->
												<div class="comment-form-comment"><textarea id="comment" name="comment" cols="45" rows="8"></textarea></div><!-- #form-section-comment .form-section -->						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:<code>&lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" class="input-submit">
							<input type="hidden" name="comment_post_ID" value="228" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
						</p>
											</form>
							</div><!-- #respond -->
						
</div><!-- #comments -->


	</div><!-- contents-->
	<div id="sidebar">
		<ul class="sidebar">
<li id="categories-5" class="widget widget_categories"><div class="side-contents"><h2 class="side-title-first">Categories</h2>		<ul>
	<li class="cat-item cat-item-21"><a href="http://jacebook.co.uk/blog/category/diaspora/" title="View all posts filed under Diaspora">Diaspora</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://jacebook.co.uk/blog/category/adobe/flash-builder/" title="View all posts filed under Flash Builder">Flash Builder</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://jacebook.co.uk/blog/category/fun/" title="Not so serious blogs!">Fun</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://jacebook.co.uk/blog/category/html5/" title="View all posts filed under html5">html5</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://jacebook.co.uk/blog/category/java-script/" title="All thing java script">Java Script</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://jacebook.co.uk/blog/category/java-script/jquery/" title="View all posts filed under jQuery">jQuery</a>
</li>
		</ul>
</div></li><li id="linkcat-2" class="widget widget_links"><div class="side-contents"><h2 class="side-title">Blogroll</h2>
	<ul class="xoxo blogroll">
<li><a href="http://jqueryfordesigners.com/" title="A great site for designers interesting in using jQuery to spice up their vision">jQuery For Designers</a></li>
<li><a href="http://processingjs.org/" title="Promising animation JS wrapper to the HTML5 canvas element">Processing JS</a></li>

	</ul>
</div></li>
<li id="tag_cloud-3" class="widget widget_tag_cloud"><div class="side-contents"><h2 class="side-title">Tags</h2><div class="tagcloud"><a href="http://jacebook.co.uk/blog/tag/attribute/" class="tag-link-19" title="1 topic" style="font-size: 8pt;">Attribute</a>
<a href="http://jacebook.co.uk/blog/tag/bouncing-animals/" class="tag-link-28" title="6 topics" style="font-size: 22pt;">bouncing animals</a>
<a href="http://jacebook.co.uk/blog/tag/cash-point/" class="tag-link-14" title="1 topic" style="font-size: 8pt;">cash point</a>
<a href="http://jacebook.co.uk/blog/tag/diaspora/" class="tag-link-21" title="1 topic" style="font-size: 8pt;">Diaspora</a>
<a href="http://jacebook.co.uk/blog/tag/distributed/" class="tag-link-23" title="1 topic" style="font-size: 8pt;">Distributed</a>
<a href="http://jacebook.co.uk/blog/tag/facebook/" class="tag-link-22" title="1 topic" style="font-size: 8pt;">Facebook</a>
<a href="http://jacebook.co.uk/blog/tag/flash-builder-2/" class="tag-link-8" title="1 topic" style="font-size: 8pt;">flash builder</a>
<a href="http://jacebook.co.uk/blog/tag/flash-catalyst/" class="tag-link-9" title="1 topic" style="font-size: 8pt;">flash catalyst</a>
<a href="http://jacebook.co.uk/blog/tag/game/" class="tag-link-30" title="6 topics" style="font-size: 22pt;">game</a>
<a href="http://jacebook.co.uk/blog/tag/html5/" class="tag-link-26" title="6 topics" style="font-size: 22pt;">html5</a>
<a href="http://jacebook.co.uk/blog/tag/iphone/" class="tag-link-29" title="6 topics" style="font-size: 22pt;">iPhone</a>
<a href="http://jacebook.co.uk/blog/tag/jquery/" class="tag-link-12" title="1 topic" style="font-size: 8pt;">jQuery</a>
<a href="http://jacebook.co.uk/blog/tag/not/" class="tag-link-20" title="1 topic" style="font-size: 8pt;">Not</a>
<a href="http://jacebook.co.uk/blog/tag/selectors/" class="tag-link-18" title="1 topic" style="font-size: 8pt;">Selectors</a>
<a href="http://jacebook.co.uk/blog/tag/short/" class="tag-link-13" title="1 topic" style="font-size: 8pt;">short</a>
<a href="http://jacebook.co.uk/blog/tag/social-network/" class="tag-link-24" title="1 topic" style="font-size: 8pt;">Social Network</a>
<a href="http://jacebook.co.uk/blog/tag/tipping-point/" class="tag-link-25" title="1 topic" style="font-size: 8pt;">Tipping Point</a>
<a href="http://jacebook.co.uk/blog/tag/transitions/" class="tag-link-10" title="1 topic" style="font-size: 8pt;">transitions</a>
<a href="http://jacebook.co.uk/blog/tag/twitter/" class="tag-link-17" title="1 topic" style="font-size: 8pt;">twitter</a>
<a href="http://jacebook.co.uk/blog/tag/verified/" class="tag-link-16" title="1 topic" style="font-size: 8pt;">verified</a>
<a href="http://jacebook.co.uk/blog/tag/whitchurch/" class="tag-link-15" title="1 topic" style="font-size: 8pt;">Whitchurch</a></div>
</div></li><li id="twitter-1" class="widget widget_twitter"><div class="side-contents"><h2 class="side-title"><a href="http://twitter.com/jason_croucher" class="twitter_title_link">Tweets</a></h2><ul class="twitter"><li class="twitter-item"> <a href="http://twitter.com/wossy" class="twitter-user">@wossy</a> clarkson, brand and evans preferably on the same night! But doubt you'll manage it... Good luck with the show though  <span class="twitter-timestamp"><abbr title="2011/09/04 19:41:00">2011/09/04</abbr></span></li><li class="twitter-item"> Apple TV round the corner? <a href="http://t.co/FF1a6Sq" class="twitter-link">http://t.co/FF1a6Sq</a>  <span class="twitter-timestamp"><abbr title="2011/08/29 06:58:18">2011/08/29</abbr></span></li><li class="twitter-item"> Something web devs have know for sometime ;-) <a href="http://is.gd/nQ4NCW" class="twitter-link">http://is.gd/nQ4NCW</a>  <span class="twitter-timestamp"><abbr title="2011/07/31 18:03:15">2011/07/31</abbr></span></li><li class="twitter-item"> <a href="http://twitter.com/shabba1973" class="twitter-user">@shabba1973</a> good news - you'll rust with that much iron in ya. Hope you're feeling better!  <span class="twitter-timestamp"><abbr title="2011/07/25 18:47:12">2011/07/25</abbr></span></li><li class="twitter-item"> <a href="http://twitter.com/p4as" class="twitter-user">@p4as</a> Shame - hope to see you on g+ dude  <span class="twitter-timestamp"><abbr title="2011/07/21 20:05:32">2011/07/21</abbr></span></li></ul></div></li>		</ul>
		<div class="end-sidebar"></div>
	</div>	<div id="footer">
		<div>© Jacebook 2011 - Powered by WordPress - Theme RedBel by Belouga.</div>
		<div><a href="http://jacebook.co.uk/?feed=rss2">Entries (RSS)</a> and <a href="http://jacebook.co.uk/?feed=comments-rss2">Comments (RSS)</a>.</div>
	</div>
</div>
<script type="text/javascript"> 
/* <![CDATA[ */
$("#header .menu li").hover(function(){$(this).find('ul:first').css({visibility: "visible",display: "none"}).slideToggle(268);},function(){ $(this).find('ul:first').slideToggle(268);});
$('#header li:not(#header .menu li li):not(.current_page_item):not(.current_page_parent):not(.current_page_ancestor)')
	.css( {backgroundPosition: "0 38px"} )
	.mouseover(function(){$(this).stop().animate({backgroundPosition:"(0 0)"}, 200);})
	.mouseout(function(){$(this).stop().animate({backgroundPosition:"(0 38px)"}, 200);})
$('.top-link')
	.css( {backgroundPosition: "right top"} )
	.mouseover(function(){$(this).stop().animate({backgroundPosition:"(right -3px)"}, 200);})
	.mouseout(function(){$(this).stop().animate({backgroundPosition:"(right top)"}, 200);})
if($.browser.safari || $.browser.Chrome){ bodyelem = $("body") } else{ bodyelem = $("html") }
$('a').click(function(){if($(this).attr("href").charAt(0) == "#"){bodyelem.animate({scrollTop: $($(this).attr("href")).offset().top+'px'}, 500);return false;}else{return true;}});
$('.search-label-sliding').css({ left: "15px" })
$('.search-label-sliding').animate({ opacity: "0.4" }).click(function() {var thisFor = $(this).attr('for');	$('.'+thisFor).focus();});
$('.search-sliding').focus(function() {$('.search-label-sliding').animate({ left: "160px" }, "fast");
	if($(this).val() == "Search") $(this).val() == "";
}).blur(function() {if($(this).val() == "") {$(this).val() == "Search";$('.search-label-sliding').animate({ left: "15px" }, "fast");}});
$('input:submit').addClass('input-submit');
$('input:button').addClass('input-submit');
$('input:reset').addClass('input-submit');
/* ]]> */
</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./HTML5 Writing a game  Step 5 » Jacebook_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-18293830-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript" src="./HTML5 Writing a game  Step 5 » Jacebook_files/shCore.js"></script>
<script type="text/javascript" src="./HTML5 Writing a game  Step 5 » Jacebook_files/shBrushPlain.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://jacebook.co.uk/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://jacebook.co.uk/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.defaults['wrap-lines'] = false;
	SyntaxHighlighter.all();
</script>

</body></html>