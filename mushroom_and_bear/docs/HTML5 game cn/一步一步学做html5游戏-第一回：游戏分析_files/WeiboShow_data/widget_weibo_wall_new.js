var $Debug=(function(){var contentList=[];function add_to_content(sText,oOpts,sCMD){var key;var text=sText!=null?sText:"";var opts={color:null,bgcolor:null,html:null};var cmd=sCMD!=null?sCMD:"log";oOpts=oOpts!=null?oOpts:{};for(key in opts){if(oOpts[key]!=null){opts[key]=oOpts[key]}}contentList.push({label:text,cmd:cmd,opts:opts,time:new Date()})}function debug_proto(sText,oOpts){add_to_content(sText,oOpts,"log")}debug_proto.fatal=function(sText,oOpts){add_to_content(sText,oOpts,"fatal")};debug_proto.error=function(sText,oOpts){add_to_content(sText,oOpts,"error")};debug_proto.warning=function(sText,oOpts){add_to_content(sText,oOpts,"warning")};debug_proto.info=function(sText,oOpts){add_to_content(sText,oOpts,"info")};debug_proto.log=function(sText,oOpts){add_to_content(sText,oOpts,"log")};debug_proto.clear=function(){contentList=[]};debug_proto.contentList=contentList;return debug_proto})();var Jobs=(function(){var E=function(id){if(typeof id==="string"){return document.getElementById(id)}else{return id}};var addEvent=function(sNode,sEventType,oFunc){var oElement=E(sNode);if(oElement==null){return}sEventType=sEventType||"click";if((typeof oFunc).toLowerCase()!="function"){return}if(oElement.attachEvent){oElement.attachEvent("on"+sEventType,oFunc)}else{if(oElement.addEventListener){oElement.addEventListener(sEventType,oFunc,false)}else{oElement["on"+sEventType]=oFunc}}};var Ready=(function(){var funcList=[];var inited=false;var exec_func_list=function(){if(inited==true){return}inited=true;for(var i=0,len=funcList.length;i<len;i++){if((typeof funcList[i]).toLowerCase()=="function"){funcList[i].call()}}funcList=[]};if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if((/loaded|complete/).test(document.readyState)){exec_func_list()}});if(window==window.top){setTimeout(function(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}exec_func_list()},500)}}else{if(document.addEventListener){addEvent(document,"DOMContentLoaded",exec_func_list)}else{if(/WebKit/i.test(navigator.userAgent)){(function(){if(/loaded|complete/i.test(document.readyState)){exec_func_list();return}setTimeout(arguments.callee,25)})()}}}addEvent(window,"load",exec_func_list);return function(oFunc){if(inited==false){funcList.push(oFunc)}else{if((typeof oFunc).toLowerCase()=="function"){oFunc.call()}}}})();function jobCls(){var regist_jobs_list={};var run_job_list=[];function start_event(){var run_index=0;var run_list_len=run_job_list.length;var jobName,jobFunc,startTime;(function(){if(run_list_len>run_index){jobName=run_job_list[run_index];jobFunc=regist_jobs_list[jobName];startTime=new Date();if(typeof jobFunc=="undefined"){$Debug.fatal("<b>Job ["+jobName+"] 未定义!</b>",{html:true});return}try{jobFunc.call()}catch(e){$Debug.fatal("<b>Job ["+jobName+"] 执行失败!</b><br/>&nbsp;"+e.name+"<br/>&nbsp;"+(e.message||e.description)+(e.fileName?"<br/>&nbsp;"+e.fileName:"")+(e.lineNumber?"<br/>&nbsp;"+e.lineNumber:""),{html:true})}finally{$Debug.info("<b>Job ["+jobName+"] 执行成功("+(new Date()-startTime)+"毫秒)</b>",{html:true})}run_index++;setTimeout(arguments.callee,25)}})()}this.regist=function(sJobName,oJobFunc){if(regist_jobs_list[sJobName]==null){regist_jobs_list[sJobName]=oJobFunc}run_job_list.push(sJobName)};Ready(start_event)}return new jobCls()})();if(!$CONFIG){$CONFIG={}}var scope=$CONFIG;Function.prototype.bind2=function(object){var __method=this;return function(){return __method.apply(object,arguments)}};scope.$VERSION="t3";scope.$BASEIMG="http://timg.sjs.sinajs.cn/"+scope.$VERSION+"/";scope.$BASECSS="http://timg.sjs.sinajs.cn/"+scope.$VERSION+"/";scope.$BASEJS="http://tjs.sjs.sinajs.cn/"+scope.$VERSION+"/";scope.$BASESTATIC="http://tjs.sjs.sinajs.cn/"+scope.$VERSION+"/";scope._ua=navigator.userAgent.toLowerCase();scope.$IE=/msie/.test(scope._ua);scope.$OPERA=/opera/.test(scope._ua);scope.$MOZ=/gecko/.test(scope._ua);scope.$IE5=/msie 5 /.test(scope._ua);scope.$IE55=/msie 5.5/.test(scope._ua);scope.$IE6=/msie 6/.test(scope._ua);scope.$IE7=/msie 7/.test(scope._ua);scope.$SAFARI=/safari/.test(scope._ua);scope.$winXP=/windows nt 5.1/.test(scope._ua);scope.$winVista=/windows nt 6.0/.test(scope._ua);var $IE=scope.$IE,$MOZ=scope.$MOZ,$IE6=scope.$IE6;function $import(url){}var Boot={};Boot.addDOMLoadEvent=function(func){if(!window.__load_events){var init=function(){if(arguments.callee.done){return}arguments.callee.done=true;if(window.__load_timer){clearInterval(window.__load_timer);window.__load_timer=null}for(var i=0;i<window.__load_events.length;i++){window.__load_events[i]()}window.__load_events=null};if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false)}if(/WebKit/i.test(navigator.userAgent)){window.__load_timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){init()}},10)}if(window.ActiveXObject){window.__load_timer=setInterval(function(){try{document.body.doScroll("left");init()}catch(ex){}},10)}window.onload=init;window.__load_events=[]}window.__load_events.push(func)};Boot.getJsVersion=function(){var ver=false;if($CONFIG){ver=$CONFIG.js?$CONFIG.js:""}if(ver){return"?v="+ver}else{return""}};try{Boot.addDOMLoadEvent(main)}catch(e){}if(typeof Sina=="undefined"){Sina={}}Sina.pkg=function(ns){if(!ns||!ns.length){return null}var levels=ns.split(".");var nsobj=Sina;for(var i=(levels[0]=="Sina")?1:0;i<levels.length;++i){nsobj[levels[i]]=nsobj[levels[i]]||{};nsobj=nsobj[levels[i]]}return nsobj};function $E(oID){var node=typeof oID=="string"?document.getElementById(oID):oID;if(node!=null){return node}else{}return null}function $C(tagName){return document.createElement(tagName)}function $N(name){return document.getElementsByName(name)}try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}if(typeof App=="undefined"){var App={}}Sina.pkg("Core");if(typeof Core=="undefined"){Core=Sina.Core}Sina.pkg("Core.Events");Core.Events.addEvent=function(elm,func,evType,useCapture){var _el=$E(elm);if(_el==null){$Debug("addEvent 找不到对象："+elm);return}if(typeof useCapture=="undefined"){useCapture=false}if(typeof evType=="undefined"){evType="click"}if(_el.addEventListener){_el.addEventListener(evType,func,useCapture);return true}else{if(_el.attachEvent){var r=_el.attachEvent("on"+evType,func);return true}else{_el["on"+evType]=func}}};Sina.pkg("Core.Base");(function(){var Detect=function(){var ua=navigator.userAgent.toLowerCase();this.$IE=/msie/.test(ua);this.$OPERA=/opera/.test(ua);this.$MOZ=/gecko/.test(ua);this.$IE5=/msie 5 /.test(ua);this.$IE55=/msie 5.5/.test(ua);this.$IE6=/msie 6/.test(ua);this.$IE7=/msie 7/.test(ua);this.$SAFARI=/safari/.test(ua);this.$winXP=/windows nt 5.1/.test(ua);this.$winVista=/windows nt 6.0/.test(ua);this.$FF2=/Firefox\/2/i.test(ua);this.$IOS=/\((iPhone|iPad|iPod)/i.test(ua)};Core.Base.detect=new Detect()})();Core.Events.getEvent=function(){return window.event};if(!Core.Base.detect.$IE){Core.Events.getEvent=function(){if(window.event){return window.event}var o=arguments.callee.caller;var e;var n=0;while(o!=null&&n<40){e=o.arguments[0];if(e&&(e.constructor==Event||e.constructor==MouseEvent)){return e}n++;o=o.caller}return e}}Core.Events.stopEvent=function(el){var ev=el?el:Core.Events.getEvent();ev.cancelBubble=true;ev.returnValue=false};if(!$IE){Core.Events.stopEvent=function(el){var ev=el?el:Core.Events.getEvent();ev.preventDefault();ev.stopPropagation()}}Sina.pkg("Core.Array");Core.Array.foreach=function(ar,insp){if(ar==null&&ar.constructor!=Array){return[]}var i=0,len=ar.length,r=[];while(i<len){var x=insp(ar[i],i);if(x!==null){r[r.length]=x}i++}return r};(function(){var isLoaded=false;App.addStyle=function(rules){var styleElement=document.createElement("style");styleElement.type="text/css";if($IE){styleElement.styleSheet.cssText=rules}else{var frag=document.createDocumentFragment();frag.appendChild(document.createTextNode(rules));styleElement.appendChild(frag)}function append(){document.getElementsByTagName("head")[0].appendChild(styleElement)}append()}})();Jobs.regist("init_weib11oWall_widget",function(){var _each=Core.Array.foreach;var _addEvent=Core.Events.addEvent;var href=location.search;var colors=/colors=([A-Fa-f\d,]+)/.test(href)?RegExp.$1:"";if(colors){colors=colors.split(",");var cstr="";if(colors[0]){cstr+=".tblog_wrap .tblog_header{border:none;background:#"+colors[0]+";}\n"}if(colors[1]){cstr+=".tblog_wrap .tblog_main{ background:#"+colors[1]+" }\n"}if(colors[2]){cstr+=".tblog_wrap .mbTxtB,\n .tblog_wrap .fans_top ul li span,\n .tblog_wrap .fans_list h4 span{color:#"+colors[2]+" }\n"}if(colors[3]){cstr+=".tblog_wrap a, .tblog_wrap a:link, .tblog_wrap a:hover, .tblog_wrap a:visited, .tblog_wrap .fans_list h4 em{color:#"+colors[3]+" }"}App.addStyle(cstr)}var isborder=/noborder=(\d+)/.test(href)?RegExp.$1:1;if(isborder==0){App.addStyle(".tblog_wrap .wrap_top{background:none;}\n.tblog_wrap .wrap_bottom{background:none;}\n.tblog_wrap .tblog_main{border-left:0; border-right:0; padding-left:1px;padding-right:1px;}")}try{var param={};param.fansRow=/fansRow=(\d+)/.test(href)?RegExp.$1:2;param.isTitle=$E("weibo_title")?1:0;param.isFans=$E("fans_list_con")?1:0;param.isWeibo=$E("weibo_con")?1:0;param.height=parseInt($E("weibo_show_con").style.height);param.width=$E("weibo_show_con").offsetWidth}catch(e){}var maxH=param.height-12;if(param.isTitle==1){maxH-=$E("weibo_title").offsetHeight}if($E("weibo_head")){maxH-=74}if(maxH<0){return}if(param.isFans){var list=$E("fans_list_con").getElementsByTagName("li");var fash=0;if(list.length==0){fash=$E("fans_list_con").offsetHeight}else{var _ul=$E("fans_list_con").getElementsByTagName("ul")[0];var w=param.width;var n=((w-10)/60)>>0;if(n==0){n=1}_ul.style.padding="0 "+((w-2-n*60)/2>>0)+"px";var r=Math.ceil(list.length/n);param.fansRow=Math.min(param.fansRow,r,(((maxH-37)/84)>>0)||1);fash=param.fansRow*84;if(fash>0){fash-=12}fash+=37;if(fash>=maxH){fash=maxH}$E("fans_list_con").style.height=fash+"px"}maxH-=fash}if(param.isWeibo){if(maxH<32){$E("weibo_con").style.display="none";return}try{var timer=null;var doit=function(){var h=$E("weibo_list").offsetHeight;if(h>0){$E("weibo_list_con").style.height=(maxH-20>h?h:maxH-20)+"px";timer&&clearInterval(timer)}else{timer=setInterval(doit,500)}};doit()}catch(e){}}});Sina.pkg("Core.Function");Core.Function.bind2=function(fFunc,object){var __method=fFunc;return function(){return __method.apply(object,arguments)}};Function.prototype.bind2=function(object){var __method=this;return function(){return __method.apply(object,arguments)}};(function(proxy){proxy.hover=function(el,hoverFun,outerFun){var cls=el.className;var css=el.style.cssText;Core.Events.addEvent(el,function(){hoverFun(el)},"mouseover");if(!outerFun||typeof outerFun!="function"){Core.Events.addEvent(el,function(){el.className=cls;el.style.cssText=css},"mouseout")}else{Core.Events.addEvent(el,function(){outerFun(el)},"mouseout")}}})(App);(function(){var _each=Core.Array.foreach;var _addEvent=Core.Events.addEvent;var _check=function(){};var dom={},list=null,listMargin=0;var autoScroll={autoScroll:function(type,speed){var speed=speed||5;var max=$E("weibo_list").offsetHeight-dom.con.clientHeight;clearInterval(this._timer);var timer=setInterval(function(){if(!autoScroll.isOutRange){return}if(autoScroll.lock){return}var st=dom.con.scrollTop;st=type=="down"?Math.min(st+2,max):Math.max(st-2,0);dom.con.scrollTop=st;if(st==0||st==max){autoScroll.stop(timer)}},speed)},start:function(type,speed){autoScroll.lock=true;var speed=speed||5;var max=$E("weibo_list").offsetHeight-dom.con.clientHeight;clearInterval(this._timer);this._timer=setInterval(function(){var st=dom.con.scrollTop;st=type=="down"?Math.min(st+2,max):Math.max(st-2,0);dom.con.scrollTop=st;if(st==0||st==max){autoScroll.stop()}},speed)},lock:false,isOutRange:true,scroll:function(e){clearTimeout(this.ctimer);if(autoScroll.isOutRange){return}var st=dom.con.scrollTop;var max=$E("weibo_list").offsetHeight-dom.con.clientHeight;st=(e.wheelDelta<=0||e.detail>0)?Math.min(st+20,max):Math.max(st-20,0);dom.con.scrollTop=st;if(st==0||st==max){_check();return}Core.Events.stopEvent(e);this.ctimer=setTimeout(function(){_check()},500)},stop:function(timer){clearInterval(timer||this._timer);autoScroll.lock=false;_check()}};Jobs.regist("init_weibo_scroll",function(){if(!$E("weibo_con")||$E("weibo_con").style.display=="none"){return}dom.con=$E("weibo_list_con");dom.con.style.position="relative";dom.con.scrollTop=0;listMargin=$E("weibo_list").offsetTop;list=dom.con.getElementsByTagName("li");(function(){var con=dom.con;if(!$E("weibo_upbtn")){return}var upImg=$E("weibo_upbtn").getElementsByTagName("img")[0];var downImg=$E("weibo_downbtn").getElementsByTagName("img")[0];var lcon=$E("weibo_list");function ck(){var s=con.scrollTop;var h=parseInt(con.style.height);upImg.style.display=(s==0?"none":"");downImg.style.display=(s+h==lcon.offsetHeight?"none":"")}var _timer=null;_check=function(){clearTimeout(_timer);setTimeout(ck,200)}})();_check();if(list.length==0){return}(function(){var _timer=null;_addEvent(dom.con,function(){clearTimeout(_timer);autoScroll.isOutRange=false},"mouseover");_addEvent(dom.con,function(e){clearTimeout(_timer);_timer=setTimeout(function(){autoScroll.isOutRange=true},50)},"mouseout")})();try{window.addEventListener("DOMMouseScroll",function(e){autoScroll.scroll(e||event)},false)}catch(err){document.onmousewheel=function(e){autoScroll.scroll(e||event)}}_each(["up","down"],function(v,i){_addEvent($E("weibo_"+v+"btn"),function(){autoScroll.start(v)},"mouseover");_addEvent($E("weibo_"+v+"btn"),function(){autoScroll.stop()},"mouseout")});_each(list,function(v,i){v.style.zoom=1;App.hover(v,function(el){el.className="focus"},function(el){el.className=""});_addEvent(v,function(){Core.Events.stopEvent();window.open(v.getAttribute("gosrc"))},"click")});(function(){var href=location.search;var speed=/speed=(\d+)/.test(href)?RegExp.$1:0;if(speed==0){return}var max=$E("weibo_list").offsetHeight-dom.con.clientHeight;dom.con.scrollTop=max;autoScroll.autoScroll("up",+speed);setTimeout(function(){_check()},+speed)})()})})();scope.loginKit=function(){var documentCookie=document.cookie+";";var supRegExp=["SUP","=([^;]*)?;"].join("");var uidRegExp=["(\\?|&)","uid","=([^&]*)(&|$)"].join("");var info=documentCookie.match(new RegExp(supRegExp,"i"));info=(info)?info[1]||"":"";info=unescape(info);var uid=info.match(new RegExp(uidRegExp));uid=(uid)?uid[2]||"":"";var oid=scope["$oid"];return{uid:uid,isLogin:!!uid,isAdmin:uid&&oid&&(uid==oid)}};scope.$isLogin=function(){return scope.loginKit().isLogin};scope.$isAdmin=function(){return scope.loginKit().isAdmin};Sina.pkg("Core.String");Core.String.j2o=function(str){if(!str||str==""){return null}try{var o=window.eval("("+str+")");return o}catch(e){$Debug("j2o : 数据分析出错");traceError(e);return null}};Sina.pkg("Utils");if(typeof Utils=="undefined"){Utils=Sina.Utils}Sina.pkg("Utils.Io");Utils.Url=function(url){url=url||"";this.url=url;this.query={};this.parse()};Utils.Url.prototype={parse:function(url){if(url){this.url=url}this.parseAnchor();this.parseParam()},parseAnchor:function(){var anchor=this.url.match(/\#(.*)/);anchor=anchor?anchor[1]:null;this._anchor=anchor;if(anchor!=null){this.anchor=this.getNameValuePair(anchor);this.url=this.url.replace(/\#.*/,"")}},parseParam:function(){var query=this.url.match(/\?([^\?]*)/);query=query?query[1]:null;if(query!=null){this.url=this.url.replace(/\?([^\?]*)/,"");this.query=this.getNameValuePair(query)}},getNameValuePair:function(str){var o={};str.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(w,n,v){if(n==""){return}o[n]=v||""});return o},getParam:function(sPara){return this.query[sPara]||""},clearParam:function(){this.query={}},setParam:function(name,value){if(name==null||name==""||typeof(name)!="string"){throw new Error("no param name set")}this.query=this.query||{};this.query[name]=value},setParams:function(o){this.query=o},serialize:function(o){var ar=[];for(var i in o){if(o[i]==null||o[i]==""){ar.push(i+"=")}else{ar.push(i+"="+o[i])}}return ar.join("&")},toString:function(){var queryStr=this.serialize(this.query);return this.url+(queryStr.length>0?"?"+queryStr:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(forceSharp){return this.anchor?"#"+this.serialize(this.anchor):(forceSharp?"#":"")}};Core.String.encodeDoubleByte=function(str){if(typeof str!="string"){return str}return encodeURIComponent(str)};Utils.Io.Ajax={createRequest:function(){var request=null;try{request=new XMLHttpRequest()}catch(trymicrosoft){try{request=new ActiveXObject("Msxml2.XMLHTTP")}catch(othermicrosoft){try{request=ActiveXObject("Microsoft.XMLHTTP")}catch(failed){}}}if(request==null){$Debug.error("<b>create request failed</b>",{html:true})}else{return request}},request:function(url,option){option=option||{};option.onComplete=option.onComplete||function(){};option.onException=option.onException||function(){};option.onTimeout=option.onTimeout||function(){};option.timeout=option.timeout?option.timeout:-1;option.returnType=option.returnType||"txt";option.method=option.method||"get";option.data=option.data||{};if(typeof option.GET!="undefined"&&typeof option.GET.url_random!="undefined"&&option.GET.url_random==0){this.rand=false;option.GET.url_random=null}this.loadData(url,option)},loadData:function(url,option){var request=this.createRequest(),tmpArr=[];var _url=new Utils.Url(url);var timer;if(option.POST){for(var postkey in option.POST){var postvalue=option.POST[postkey];if(postvalue!=null){tmpArr.push(postkey+"="+Core.String.encodeDoubleByte(postvalue))}}}var sParameter=tmpArr.join("&")||"";if(option.GET){for(var key in option.GET){if(key!="url_random"){_url.setParam(key,Core.String.encodeDoubleByte(option.GET[key]))}}}if(this.rand!=false){_url.setParam("rnd",Math.random())}if(option.timeout>-1){timer=setTimeout(option.onTimeout,option.timeout)}request.onreadystatechange=function(){if(request.readyState==4){var response,type=option.returnType;try{switch(type){case"txt":response=request.responseText;break;case"xml":if(Core.Base.detect.$IE){response=request.responseXML}else{var Dparser=new DOMParser();response=Dparser.parseFromString(request.responseText,"text/xml")}break;case"json":response=eval("("+request.responseText+")");break}option.onComplete(response);clearTimeout(timer)}catch(e){option.onException(e.message,_url);return false}}};try{if(option.POST){request.open("POST",_url,true);request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");request.send(sParameter)}else{request.open("GET",_url,true);request.send(null)}}catch(e){option.onException(e.message,_url);return false}}};App.doRequest=function(oData,sUrl,fCb,fEcb,ptype,type){var emptyFun=function(){};var param={onComplete:function(result){try{if(typeof result=="string"){result=result.replace(/;$/,"")}result=(typeof result=="string"&&(/\s*{/.test(result)))?Core.String.j2o(result):result;if(result&&(result.code=="A00006"||result.code=="S00001")){(fCb||emptyFun)(result.data,result)}else{(fEcb||emptyFun)(result)}}catch(e){trace(e)}},onException:function(json){(fEcb||emptyFun)(json)}};ptype=(ptype||"post").toUpperCase();param[ptype]=oData;param.returnType="json";type=type||"ajax";Utils.Io.Ajax.request(sUrl,param)};Core.String.trimHead=function(str){return str.replace(/^(\u3000|\s|\t)*/gi,"")};Core.String.trimTail=function(str){return str.replace(/(\u3000|\s|\t)*$/gi,"")};Core.String.trim=function(str){return Core.String.trimHead(Core.String.trimTail(str))};Core.String.decodeHTML=function(str){var div=document.createElement("div");div.innerHTML=str;return div.innerText==undefined?div.textContent:div.innerText};Core.String.encodeHTML=function(str){var div=document.createElement("div");div.appendChild(document.createTextNode(str));return div.innerHTML.replace(/\s/g,"&nbsp;")};(function(){var NODEMAP={AREA:"MAP",CAPTION:"TABLE",COL:"TABLE|COLGROUP",COLGROUP:"TABLE",LEGEND:"FIELDSET",OPTGROUP:"SELECT",OPTION:"SELECT",PARAM:"OBJECT",TBODY:"TABLE",TD:"TR",TFOOT:"TABLE",TH:"TABLE|TR",THEAD:"TABLE",TR:"TBODY|THEAD|TH|TFOOT"};var trim=Core.String.trim;var create=function(tagName,attributes,that){var dom=null;if(tagName.toUpperCase()=="TEXT"){dom=document.createTextNode(tagName)}else{dom=$C(tagName)}if(typeof attributes==="object"){for(var k in attributes){switch(k){case"class":dom.className=attributes[k];break;case"id":that.domList[attributes[k]]=dom;break;case"action":if(that.actList[attributes[k]]){that.actList[attributes[k]]=that.actList[attributes[k]].concat([dom])}else{that.actList[attributes[k]]=[dom]}break;case"style":dom.style.cssText=attributes[k];break;case"innerHTML":if(dom.nodeType===3){dom.nodeValue=Core.String.decodeHTML(attributes[k])}else{dom.innerHTML=attributes[k]}break;case"nodeValue":if(dom.nodeType===3){dom.nodeValue=attributes[k]}else{dom.innerHTML=Core.String.encodeHTML(attributes[k])}break;default:dom.setAttribute(k,attributes[k])}}}return dom};var check=function(parent,childObj){var tnames=NODEMAP[childObj.tag];if(tnames){var pList=tnames.split("|");for(var i=0,len=pList.length;i<len;i++){if(parent.tagName==pList[i]){return true}}return false}return true};var append=function(parent,childObj,that){childObj.tag=childObj.tag.toLocaleUpperCase();if(!check(parent,childObj)){return false}var returnDom=create(childObj.tag,childObj.attr,that);parent.appendChild(returnDom);return returnDom};var makeTree=function(parent,objList,that){for(var i=0,len=objList.length;i<len;i++){var Leaves=append(parent,objList[i],that);if(!Leaves){alert("tree wrong!!!");return false}if(objList[i].list&&objList[i].list.length){makeTree(Leaves,objList[i].list,that)}}};var parseAttribute=function(attrStr){var ret={};var buff=[];if(attrStr){var re=new RegExp("(?:([^\\s=]+)\\s*=\\s*[\\\"\\']([^=\\\"\\']*)[\\\"\\'])","ig");while(buff=re.exec(attrStr)){ret[buff[1]]=buff[2]}}return ret};var htmlToTemplate=function(htmlStr){var so=parseHTML(htmlStr);var ret=[];var point=ret;var pointList=[];for(var i=0,len=so.length;i<len;i+=1){if(so[i][1]===undefined){var a=buildItem(["","","text",'innerHTML="'+so[i][0]+'"',""]);point.push(a)}if(so[i][1]===""){if(trim(so[i][0])==""){continue}else{if(/^\<[^\>]+\>$/.test(so[i][0])){var a=buildItem(so[i]);point.push(a);if(!/\/\s*>$/.test(so[i][0])){a.list=[];point=a.list;pointList.push(point)}}else{var a=buildItem(["","","text",'innerHTML="'+so[i][0]+'"',""]);if(trim(so[i][0]).replace(/\r|\n/ig,"")){point.push(a)}}}}if(so[i][1]==="/"){pointList.pop();if(pointList.length===0){point=ret}else{point=pointList[pointList.length-1]}}}return ret};var buildItem=function(args){var ret={};ret.tag=args[2];ret.attr=parseAttribute(args[3]);return ret};var parseHTML=function(htmlStr){var tags=/[^<>]+|<(\/?)([A-Za-z]+)([^<>]*)>/g;var a,i;var ret=[];while((a=tags.exec(htmlStr))){var n=[];for(i=0;i<a.length;i+=1){n.push(a[i])}ret.push(n)}return ret};App.builder2=function(spec){var that={};that.box=null;that.domList={};that.actList={};if(spec.box){that.box=spec.box}else{that.box=$C("DIV")}if(spec.template){if(typeof spec.template==="string"){spec.template=htmlToTemplate(spec.template)}makeTree(that.box,spec.template,that)}return that}})();Sina.pkg("Core.Dom");Core.Dom.getStyle=function(el,property){switch(property){case"opacity":var val=100;try{val=el.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{val=el.filters("alpha").opacity}catch(e){}}return val/100;case"float":property="styleFloat";default:var value=el.currentStyle?el.currentStyle[property]:null;return(el.style[property]||value)}};if(!Core.Base.detect.$IE){Core.Dom.getStyle=function(el,property){if(property=="float"){property="cssFloat"}try{var computed=document.defaultView.getComputedStyle(el,"")}catch(e){traceError(e)}return el.style[property]||computed?computed[property]:null}}Sina.pkg("Core.System");Core.System.getScrollPos=function(oDocument){oDocument=oDocument||document;var dd=oDocument.documentElement;var db=oDocument.body;return[Math.max(dd.scrollTop,db.scrollTop),Math.max(dd.scrollLeft,db.scrollLeft),Math.max(dd.scrollWidth,db.scrollWidth),Math.max(dd.scrollHeight,db.scrollHeight)]};Core.Dom.getXY=function(el){if((el.parentNode==null||el.offsetParent==null||Core.Dom.getStyle(el,"display")=="none")&&el!=document.body){return false}var parentNode=null;var pos=[];var box;var doc=el.ownerDocument;box=el.getBoundingClientRect();var scrollPos=Core.System.getScrollPos(el.ownerDocument);return[box.left+scrollPos[1],box.top+scrollPos[0]];parentNode=el.parentNode;while(parentNode.tagName&&!/^body|html$/i.test(parentNode.tagName)){if(Core.Dom.getStyle(parentNode,"display").search(/^inline|table-row.*$/i)){pos[0]-=parentNode.scrollLeft;pos[1]-=parentNode.scrollTop}parentNode=parentNode.parentNode}return pos};if(!$IE){Core.Dom.getXY=function(el){if((el.parentNode==null||el.offsetParent==null||Core.Dom.getStyle(el,"display")=="none")&&el!=document.body){return false}var parentNode=null;var pos=[];var box;var doc=el.ownerDocument;pos=[el.offsetLeft,el.offsetTop];parentNode=el.offsetParent;var hasAbs=Core.Dom.getStyle(el,"position")=="absolute";if(parentNode!=el){while(parentNode){pos[0]+=parentNode.offsetLeft;pos[1]+=parentNode.offsetTop;if(scope.$SAFARI&&!hasAbs&&Core.Dom.getStyle(parentNode,"position")=="absolute"){hasAbs=true}parentNode=parentNode.offsetParent}}if(scope.$SAFARI&&hasAbs){pos[0]-=el.ownerDocument.body.offsetLeft;pos[1]-=el.ownerDocument.body.offsetTop}parentNode=el.parentNode;while(parentNode.tagName&&!/^body|html$/i.test(parentNode.tagName)){if(Core.Dom.getStyle(parentNode,"display").search(/^inline|table-row.*$/i)){pos[0]-=parentNode.scrollLeft;pos[1]-=parentNode.scrollTop}parentNode=parentNode.parentNode}return pos}}Core.Dom.setStyle=function(el,property,val){switch(property){case"opacity":el.style.filter="alpha(opacity="+(val*100)+")";if(!el.currentStyle||!el.currentStyle.hasLayout){el.style.zoom=1}break;case"float":property="styleFloat";default:el.style[property]=val}};if(!Core.Base.detect.$IE){Core.Dom.setStyle=function(el,property,val){if(property=="float"){property="cssFloat"}el.style[property]=val}}Core.Dom.setXY=function(el,pos,noRetry){var pos_style=Core.Dom.getStyle(el,"position");if(pos_style=="static"){Core.Dom.setStyle(el,"position","relative");pos_style="relative"}var page_xy=Core.Dom.getXY(el);if(page_xy==false){return false}var delta=[parseInt(Core.Dom.getStyle(el,"left"),10),parseInt(Core.Dom.getStyle(el,"top"),10)];if(isNaN(delta[0])){delta[0]=(pos_style=="relative")?0:el.offsetLeft}if(isNaN(delta[1])){delta[1]=(pos_style=="relative")?0:el.offsetTop}if(pos[0]!=null){el.style.left=pos[0]-page_xy[0]+delta[0]+"px"}if(pos[1]!=null){el.style.top=pos[1]-page_xy[1]+delta[1]+"px"}return true};Core.Dom.removeNode=function(node){node=$E(node)||node;try{node.parentNode.removeChild(node)}catch(e){}};Core.String.byteLength=function(str){if(typeof str=="undefined"){return 0}var aMatch=str.match(/[^\x00-\x80]/g);return(str.length+(!aMatch?0:aMatch.length))};Core.String.leftB=function(str,len){var s=str.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");str=str.slice(0,s.slice(0,len).replace(/\*\*/g," ").replace(/\*/g,"").length);if(Core.String.byteLength(str)>len){str=str.slice(0,str.length-1)}return str};(function(proxy){proxy.share_bigpop=function(spec){spec.template='<div class="PopLayer" id="bigpop" style="display:none;"><table class="Poptips"><tbody><tr><td class="top_l"></td><td class="top_c"></td><td class="top_r"></td></tr><tr><td class="mid_l"></td><td class="mid_c"><div class="layerBox"><div style="width: auto;" class="layerBoxCon1"><div class="PopInfo clearFix"><div class="Pop_close"><a id="popclose" class="close" href="javascript:void(0);"></a></div><div id="poptype" class="Poparrow"></div><div class="iconntent" id="popcontent"><div class="clearit"></div></div></div></div></div></td><td class="mid_r"></td></tr><tr><td class="bottom_l"></td><td class="bottom_c"></td><td class="bottom_r"></td></tr></tbody></table></div>';spec.view=new proxy.builder2(spec);spec.view.domList.popcontent.innerHTML=spec.popcontent+spec.view.domList.popcontent.innerHTML;spec.view.domList.popclose.onclick=function(){that.clear=true;spec.view.domList.bigpop.style.display="none"};spec.view.domList.bigpop.style.position="absolute";spec.view.domList.bigpop.style.zIndex="800";document.body.appendChild(spec.view.domList.bigpop);var that={show:function(){that.clear=false;spec.view.domList.bigpop.style.display=""},hidd:function(){Core.Events.fireEvent(spec.view.domList.popclose,"click")},getWidth:function(){return spec.view.domList.bigpop.offsetWidth},getHeight:function(){return spec.view.domList.bigpop.offsetHeight},setPostion:function(pos){Core.Dom.setXY(spec.view.domList.bigpop,pos)},setType:function(type){spec.view.domList.poptype.className="Poparrow"+type},getRoot:function(){return spec.view.domList.bigpop}};App.fillInfo_close=that.hidd;return that}})(App);Core.System.winSize=function(_target){var w,h;if(_target){target=_target.document}else{target=document}if(self.innerHeight){if(_target){target=_target.self}else{target=self}w=target.innerWidth;h=target.innerHeight}else{if(target.documentElement&&target.documentElement.clientHeight){w=target.documentElement.clientWidth;h=target.documentElement.clientHeight}else{if(target.body){w=target.body.clientWidth;h=target.body.clientHeight}}}return{width:w,height:h}};(function(){var parseParam=function(oSource,oParams){var key;try{if(typeof oParams!="undefined"){for(key in oSource){if(oParams[key]!=null){oSource[key]=oParams[key]}}}}finally{key=null;return oSource}};Core.Base.parseParam=parseParam})();Utils.Io.JsLoad={};(function(){function createScripts(oOpts,oCFG){processUrl(oOpts,oCFG);var urls=oOpts.urls;var i,len=urls.length;for(i=0;i<len;i++){var js=$C("script");js.src=urls[i].url;js.charset=urls[i].charset;js[Core.Base.detect.$IE?"onreadystatechange":"onload"]=function(){if(Core.Base.detect.$MOZ||this.readyState.toLowerCase()=="complete"||this.readyState.toLowerCase()=="loaded"){oCFG.script_loaded_num++}};document.getElementsByTagName("head")[0].appendChild(js)}}function processUrl(oOpts,oCFG){var urls=oOpts.urls;var get_hash=oOpts.GET;var i,len=urls.length;var key,url_cls,varname,rnd;for(i=0;i<len;i++){rnd=parseInt(Math.random()*100000000);url_cls=new Utils.Url(urls[i].url);for(key in get_hash){if(oOpts.noencode==true){url_cls.setParam(key,get_hash[key])}else{url_cls.setParam(key,Core.String.encodeDoubleByte(get_hash[key]))}}varname=url_cls.getParam("varname")||"requestId_"+rnd;if(oOpts.noreturn!=true){url_cls.setParam("varname",varname)}oCFG.script_var_arr.push(varname);urls[i].url=url_cls.toString();urls[i].charset=urls[i].charset||oOpts.charset}}function ancestor(aUrls,oOpts){var _opts={urls:[],charset:"utf-8",noreturn:false,noencode:true,timeout:-1,POST:{},GET:{},onComplete:null,onException:null};var _cfg={script_loaded_num:0,is_timeout:false,is_loadcomplete:false,script_var_arr:[]};_opts.urls=typeof aUrls=="string"?[{url:aUrls}]:aUrls;Core.Base.parseParam(_opts,oOpts);createScripts(_opts,_cfg);(function(){if(_opts.noreturn==true&&_opts.onComplete==null){return}var i,data=[];if(_cfg.script_loaded_num==_opts.urls.length){_cfg.is_loadcomplete=true;if(_opts.onComplete!=null){for(i=0;i<_cfg.script_var_arr.length;i++){data.push(window[_cfg.script_var_arr[i]])}if(_cfg.script_var_arr.length<2){_opts.onComplete(data[0])}else{_opts.onComplete(data)}}return}if(_cfg.is_timeout==true){return}setTimeout(arguments.callee,50)})();if(_opts.timeout>0){setTimeout(function(){if(_cfg.is_loadcomplete!=true){if(_opts.onException!=null){_opts.onException()}_cfg.is_timeout=true}},_opts.timeout)}}Utils.Io.JsLoad.request=function(aUrls,oOpts){new ancestor(aUrls,oOpts)}})();App.unit=function(){var it={},udf;it.u=u=function(func,key){var context={it:it,sup:it[key]};return function(){func.apply(context,arguments);return it}};return it};(function(ns){ns.DomBuilder=function(html,parent,param){param=typeof param=="object"?param:{};var snap=$C("div");snap.innerHTML=html;var it={},i=0,domList={},actList={},nodes=snap.getElementsByTagName("*"),len=nodes.length,cv=param.clear||1,mk=param.mm||"mm",dk=param.dd||"dd",c,mm,dd;for(i;i<len;i++){c=nodes[i];dd=c.getAttribute(dk);mm=c.getAttribute(mk);dd&&(domList[dd]=c)&&(cv&&c.removeAttribute(dk));mm&&((!actList[mm]&&(actList[mm]=[c]))||(actList[mm]=actList[mm].concat([c])))&&(cv&&c.removeAttribute(mk))}it.parent=parent;it.domList=domList;it.actList=actList;it.add=function(){while(snap.firstChild){parent.appendChild(snap.firstChild)}return it};return it};ns.builder3=function(html,parent,param){parent.innerHTML="";return ns.DomBuilder(html,parent,param).add()}})(App);App.removeChildren=function(parent){var n;while(n=parent.firstChild){parent.removeChild(n)}};(function(proxy){var d=document,zIndex=1000;function b2(t,b){return App.builder3(t,b,{dd:"id",mm:"action"})}proxy.PopUp=function(){var it=App.unit(),u=it.u,wrap,body,mask,cp="position:absolute;clear:both;",ch="visibility:hidden;display:none",cs="width:100%;height:100%",rall=App.removeChildren;with(it.wrap=wrap=$C("div")){appendChild(it.body=body=$C("div"));style.cssText=[cp,ch,"z-index:"+zIndex++].join(";")}it.mask=u(function(){if(!mask){wrap.insertBefore(mask=$C("iframe"),body);with(mask){frameborder=0;src="about:blank";style.cssText=[cp,cs,"filter:alpha(opacity=0);opacity:0;z-index:-1"].join(";")}}});it.content=u(function(html){rall(body);it.dom=b2(html,body)["domList"]});it.position=u(function(x,y){with(wrap.style){left=x+"px";top=y+"px"}});it.visible=u(function(b){with(wrap.style){visibility=b?"visible":"hidden";display=b?"":"none"}});it.zIndex=u(function(nIndex){wrap.style.zIndex=nIndex});it.destroy=u(function(){wrap.parentNode.removeChild(wrap);wrap=body=mask=dom=null});d.body.appendChild(wrap);return it}})(App);(function(ns){ns.ELSize=function(oElement,key,hasMargin){var c=Core.Dom.getStyle,os=oElement[(key=="width")?"offsetWidth":"offsetHeight"],i=0,p=["padding","margin","border"],d=(key=="width")?["Left","Right"]:["Top","Bottom"];for(i;i<d.length;i++){os-=parseFloat(c(oElement,"padding"+d[i]))||0;hasMargin&&(os+=parseFloat(c(oElement,"margin"+d[i]))||0);os-=parseFloat(c(oElement,"border"+d[i]+"Width"))||0}return os}})(App);(function(ns){var d=document,udf;App.Wipe=function(eWrap,eTarget,nCount){var it=App.unit(),es=App.ELSize,isPlaying=0,u=it.u,timer,c=nCount||8,wp=eWrap,ws,bp=eTarget,bs=bp.style,parent,sw,sh,ow,oh;if(!wp){wp=$C("div");wp.style.cssText="position:relative;clear:both";parent=bp.parentNode;parent.insertBefore(wp,bp);wp.appendChild(bp)}ws=wp.style;it.isPlaying=function(){return isPlaying};it.isVisible=function(){return isVisible};it.reset=u(function(){isPlaying=0;clearInterval(timer);ws.visibility="hidden";sw=sh=ow=oh=null});it.wipe=u(function(sType,bVisible,fCallBack,bReverse){if(isPlaying){return}var d,a,t,o,r,q,i=1,v=bVisible==udf?true:bVisible,que,uque;isPlaying=1;ws.visibility=ws.overflow="hidden";ws.display="block";bs[$IE?"styleFloat":"cssFloat"]="left";bs.marginTop=bs.marginLeft="0px";bs.width=(sw||(sw=es(bp,"width")))+"px";bs.height=(sh||(sh=es(bp,"height")))+"px";ws.width=(ow||(ow=bp.offsetWidth))+"px";ws.height=(oh||(oh=bp.offsetHeight))+"px";bs.marginTop=bs.marginLeft="0px";d={up:0,down:1,left:2,right:3}[sType];a=["marginTop","height","marginLeft","width"][d];t=[bs,ws,bs,ws][d];o=[oh,oh,ow,ow][d];r=[0,1,0,1][d];que=[o];que[c]=0;for(i;i<c;i++){que[i]=(o=o/2)}bReverse&&que.reverse();uque=que.concat().reverse();q=(v?r:!r)?uque:que;t[a]=[q[0],"px"].join("");ws.visibility="visible";clearInterval(timer);timer=setInterval(function(){if(q.length){t[a]=Math.floor(q.shift())+"px";return}clearInterval(timer);isPlaying=0;v&&(ws.overflow="");try{bs.cssText="";fCallBack&&u(fCallBack)()}catch(e){}},30)});return it}})(App);(function(ns){var timer,que,i,step=8,of;ns.scrollTo=function(nForm,nTo,nStep){step=nStep||step;of=nForm-nTo;que=[of];que[step]=0;i=1;for(i;i<step;i++){que[i]=(of=of/2)}clearInterval(timer);timer=setInterval(function(){if(que.length){window.scrollTo(0,nTo+que.shift());return}clearInterval(timer)},30)}})(App);(function(ns){var d=document,de=(d.documentElement||{}),udf,b2=function(t,b){return App.builder3(t,b,{dd:"id",mm:"action"})};ns.PopUpWipe=function(){var it=ns.PopUp(),u=it.u,e=it.e,uque=[],type,isOpened,cx,cy,t;it.ani=App.Wipe(it.wrap,it.body);it.wipe=u(function(sType,bVisible,fCallBack){type=sType;it.ani.wipe(sType,bVisible,fCallBack)});it.wipeHide=u(function(){it.ani.reset();it.wipe(type,false,function(){it.visible(false)})});it.position=u(function(x,y){if(cx!=x||cy!=y){cx=x;cy=y;it.ani.reset()}type=null;t=window.pageYOffset||Math.max(de.scrollTop,d.body.scrollTop);if(y<t){App.scrollTo(t,y)}this.sup(x,y)},"position");it.close=u(function(){if(!type){it.visible(false);return false}it.wipeHide()});return it}})(App);(function(ns){var d=document,ce=Core.Events,adde=ce.addEvent,removee=ce.removeEvent,stope=ce.stopEvent,rall=App.removeChildren,unf,builder=function(t,b){return App.builder3(t,b,{dd:"id",mm:"action"})};ns.BasePopUpDialog=function(){var contnet='<div id="panel" class="miniPopLayer" style="width:200px;"><div id="typePanel" class="txt1 gray6"><img class="tipicon tip1" id="icon" src="'+scope.$BASECSS+'style/images/common/PY_ib.gif"/><div id="content"></div></div><div id="buttonPanel" style="display:none" class="btn"></div></div>';var it=ns.PopUpWipe().content(contnet),u=it.u,dom=it.dom;it.show=u(function(){it.visible(true)});it.hide=u(function(){it.visible(false)});it.width=u(function(nWidth){dom.panel.style.width=(nWidth||200)+"px"});it.addButton=u(function(sLabel,fClick){if(sLabel===unf&&fClick===unf){rall(dom.buttonPanel);return}var span;dom.buttonPanel.appendChild(span=$C("span"));var button=builder(['<a id="button" style="width:39px;" class="newabtn_ok" href="javascript:void(0)" onclick="return false;"><em>',sLabel,"</em></a>"].join(""),span)["domList"]["button"];button.onclick=u(fClick);dom.buttonPanel.style.display=""});it.content=u(function(sContent){dom.content.innerHTML=sContent});it.icon=u(function(nType){dom.icon.className=["tipicon tip",nType].join("")});it.wipe=u(function(sType,bVisible,fCallBack){this.sup(sType,bVisible,fCallBack)},"wipe");adde(window,function(){it.visible(false)},"resize");return it};ns.PopUpAlert=(function(){var it,u,cx,cy,clock;return function(){if(it){return it}it=ns.BasePopUpDialog();u=it.u;it.yes=u(function(f){it.onYes=f});it.close=u(function(f){clearTimeout(clock);typeof it.onYes=="function"&&it.onYes();this.sup()},"close");it.lateClose=u(function(n){clearTimeout(clock);clock=setTimeout(function(){it.close()},n||3000)});it.position=u(function(x,y){if(x!=cx||y!=cy){cx=x;cy=y;clearTimeout(clock)}this.sup(x,y)},"position");return it}})();ns.PopUpConfirm=(function(){var it,u,cx,cy;return function(){if(it){return it}it=ns.BasePopUpDialog();u=it.u;it.yes=u(function(f){it.onYes=f});it.no=u(function(f){it.onNo=f});it.close=u(function(f){typeof it.onNo=="function"&&it.onNo();this.sup()},"close");it.addButton($CLTMSG.CX0125,function(){typeof it.onYes=="function"&&it.onYes();it.wipeHide()});it.addButton($CLTMSG.CX0126,function(){it.close()});return it}})()})(App);App.queryToJson=function(QS,isDecode){var _Qlist=(Core.String.trim(QS)).split("&");var _json={};var _fData=function(data){if(isDecode){return decodeURIComponent(data)}else{return data}};for(var i=0,len=_Qlist.length;i<len;i++){if(_Qlist[i]){var _hsh=_Qlist[i].split("=");if(_hsh[1]){if(!_json[_hsh[0]]){_json[_hsh[0]]=_fData(_hsh[1])}else{_json[_hsh[0]]=[_fData(_hsh[1])].concat(_json[_hsh[0]])}}else{if(!_json["$nullName"]){_json["$nullName"]=_fData(_hsh[0])}else{_json["$nullName"]=[_fData(_hsh[0])].concat(_json["$nullName"])}}}}return _json};scope.$widget_height=500;scope.$widget_width=230;App.login=function(){var weiboURL="http://service.weibo.com/reg/loginindex.php?regbackurl=http%3A%2F%2Fweibo.com&backurl=http%3A%2F%2F"+location.host+"%2Fstaticjs%2FloginProxy.html&vsrc=app_weiboshow&appsrc="+scope.$appsrc+"&showlogo=0&rnd="+(new Date().valueOf());if(/weibo.com/.test(location.host)){weiboURL=weiboURL.replace(/\/widget/,"")}var loginPopWindow=window.open(weiboURL,"miniblog_login",["toolbar=1,status=0,resizable=1,width=620,height=540,left=",(screen.width-620)/2,",top=",(screen.height-450)/2].join(""));loginPopWindow.focus()};(function(){var pop=null;App.fillInfo=function(){if(!pop){pop=App.share_bigpop({popcontent:'<div class="errorLayer" style="width:auto;">    							<div class="mid" style="padding:0px;background:none">    								<div class="conn" style="width:auto;">    									<p class="bigtxt">你未开通新浪微博。 </p>    									<p class="stxt3"><a id="errorLayer_href" href="http://weibo.com/person/full_info.php?uid='+scope.loginKit().uid+"&type=2&r="+encodeURIComponent(location.href)+'" target="_blank">点击进入开通微博</a> </p>    								</div>    							</div>    						</div>'})}pop.show();pop.setPostion([1,1])}})();(function(){App.showFollowMsg=function(msg,icon){var target=$E("widget_followuser");if(!target){return}var icon=icon||3;var pos=Core.Dom.getXY(target);var x=pos[0]-((216-target.offsetWidth)/2);var y=pos[1]-(target.offsetHeight)-10;var alert=App.PopUpAlert().position(x,y);alert.content(msg).icon(icon).width(180).wipe("up",true).lateClose(1500)};function $msg(uid){if(scope.loginKit().uid==uid){App.showFollowMsg("不能关注自己",1);return}}function $post(uid,dom){if(scope.loginKit().uid==uid){App.showFollowMsg("不能关注自己",1);return}var weiboURL="/widget/weiboshow/aj_attention.php";if(/weibo.com/.test(location.host)){weiboURL="/weiboshow/aj_attention.php"}Utils.Io.Ajax.request(weiboURL,{POST:{uid:scope.loginKit().uid,fuid:uid},onComplete:function(json){switch(json.code){case"A00006":App.showFollowMsg("加关注成功");break;case"A10007":App.showFollowMsg("已关注");break;case -1:App.fillInfo();break;case -2:$Debug("not login");App.login();break;case -3:$Debug("refer值不对");break}if((json.code=="A00006"||json.code=="A10007")&&dom){dom.parentNode.innerHTML='<span class="btn_concern"><img class="ico_tip" src="http://timg.sjs.sinajs.cn/t3/style/images/common/transparent.gif" title="已关注" alt="已关注" /><em>已关注</em></span>'}},onException:function(){},timeout:30000,returnType:"json"})}App.followOne=function(uid,dom){scope.uid=uid;if(!scope.$isLogin()){App.login();return}$post(uid,dom)};App.loginBackUrlCallBack=function(){App.followOne(scope.uid,$E("widget_followuser"))}})();